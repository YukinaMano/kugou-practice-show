import{_ as a,m as l,n as s,t as e,r as c,q as t,p as i,a as n,c as u,w as o,k as d,i as m,o as r,b as g,d as p,s as f,u as A,x as _,F as b,f as k,y,z as v,e as x,v as U,A as N,h,g as w,B as I}from"./index-DgNV8-iG.js";import{o as L}from"./uni-app.es.m2UvHxeL.js";import{l as S}from"./localuser.wW-_8YGP.js";const z=a({__name:"index",setup(a){const z=S(),R=l("audio"),W=s(R.nowMusicInfo),E=e(R,"isPause"),C=e(R,"skipMode"),M=s({uid:"",avatarUrl:"/static/pic/index/avatar.png",nickname:"胡萝北",level:5,duration:15302});let P=c([{mTitle:"",mSinger:"",mPictureUrl:"",mMusicUrl:"",mLyricUrl:""}]);const j=c([0,0,0,0]),J=c(0),T=["switch_allloop","switch_random","switch_oneloop"],D=()=>{},Z=()=>{console.debug("去播放详情页"),N({url:"/pages/index/play"})},B=()=>{R.doToggle()},G=()=>{R.toNextMusic()},Y=()=>{R.doSwitchSkipMode()};t((()=>{R.onPlaying((()=>{J.value=R.getLoading()})),R.onMusicEnded((()=>{G()})),(async()=>{console.log(z.userKey);const a=await d.fetch.music.getMyList({key:z.userKey});console.debug(a.data),P.value=a.data,R.loadMusicList(a.data)})(),console.debug("组件挂载完成")})),L((()=>{console.debug("预加载子页面，预防白屏"),i({url:"pages/index/play"})}));const F=[{iconName:"localhost",iconUrl:"/static/pic/index/pc.png",title:"本地音乐"},{iconName:"like",iconUrl:"/static/pic/index/heart.png",title:"喜欢·歌单"},{iconName:"download",iconUrl:"/static/pic/index/download.png",title:"下载"},{iconName:"time",iconUrl:"/static/pic/index/time.png",title:"最近"}],H=[{iconName:"music",iconUrl:"/static/pic/index/note.png",bgc:"#06b062",title:"乐库"},{iconName:"musiclist",iconUrl:"/static/pic/index/work.png",bgc:"#067ab0",title:"歌单"},{iconName:"radio",iconUrl:"/static/pic/index/chart.png",bgc:"#e62134",title:"电台·酷群"},{iconName:"guess_like",iconUrl:"/static/pic/index/radio.png",bgc:"#c25bd1",title:"猜你喜欢"},{iconName:"recommendation",iconUrl:"/static/pic/index/chart.png",bgc:"#edb231",title:"每日推荐"},{iconName:"listen",iconUrl:"/static/pic/index/micro.png",bgc:"#4be22d",title:"听歌识曲"}];return(a,l)=>{const s=m,e=n("SvgIcon"),c=h,t=w;return r(),u(s,{class:"main"},{default:o((()=>[g(s,{class:"bg"}),g(s,{class:"status-bar"},{default:o((()=>[g(s,{class:"navigatebar"},{default:o((()=>[g(e,{class:"menu",name:"menu"}),g(s,null,{default:o((()=>[g(c,{class:"gri"},{default:o((()=>[p("听")])),_:1})])),_:1}),g(s,null,{default:o((()=>[g(c,null,{default:o((()=>[p("看")])),_:1})])),_:1}),g(s,null,{default:o((()=>[g(c,null,{default:o((()=>[p("唱")])),_:1})])),_:1}),g(e,{class:"search",name:"search"})])),_:1})])),_:1}),g(s,{class:"content"},{default:o((()=>[g(s,{class:"personal"},{default:o((()=>[g(t,{class:"avatar",src:M.avatarUrl},null,8,["src"]),g(s,{class:"infor"},{default:o((()=>[g(s,{class:"up"},{default:o((()=>[g(c,{class:"nickname"},{default:o((()=>[p(f(M.nickname),1)])),_:1}),g(t,{class:"vip",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAABS2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDIgNzkuMTYwOTI0LCAyMDE3LzA3LzEzLTAxOjA2OjM5ICAgICAgICAiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIi8+CiA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgo8P3hwYWNrZXQgZW5kPSJyIj8+nhxg7wAAALFJREFUGJWlz0EKgkAUBuDf8UWaERq4MggvEQSt2nWEqIu06TBR0BHaRrTsEJFY0zwNwtDFzNARWvTd4AP+5Ww3u1Ecx/tOx0+NMW8AcF23V9f1VSmeUxSGqygKUyJCMkh62S1D1A/Bioda67VQzEul+Nw0DQDA933IhwRzcVGKF8Ia+8nzfFIU5aGqKgTdAGX5Ot7zx9gaWxK1CNCAlHImhHNqe14g78+pI4SlFv1efAHjNkyg5CGhHAAAAABJRU5ErkJggg=="})])),_:1}),g(s,{class:"down"},{default:o((()=>[g(s,{class:"level round-text"},{default:o((()=>[p("LV."+f(M.level),1)])),_:1}),g(c,{class:"duration"},{default:o((()=>[p("听歌"+f(M.duration)+"分钟",1)])),_:1})])),_:1})])),_:1})])),_:1}),g(s,{class:"my-music"},{default:o((()=>[l[0]||(I(-1),l[0]=(r(),A(b,null,_(F,((a,l)=>g(s,{class:"my-music-item",key:l,onClick:D},{default:o((()=>[g(e,{class:"icon",name:a.iconName},null,8,["name"]),g(c,{class:"alt"},{default:o((()=>[p(f(a.title),1)])),_:2},1024),g(c,{class:"num"},{default:o((()=>[p(f(j.value[l]),1)])),_:2},1024)])),_:2},1024))),64)),I(1),l[0])])),_:1}),g(s,{class:"all-music"},{default:o((()=>[l[1]||(I(-1),l[1]=(r(),A(b,null,_(H,((a,l)=>g(s,{class:"all-music-item",key:l},{default:o((()=>[g(s,{class:"icon-bg",style:v("background-color:"+a.bgc)},{default:o((()=>[g(e,{class:"icon",name:a.iconName},null,8,["name"])])),_:2},1032,["style"]),g(c,{class:"alt"},{default:o((()=>[p(f(a.title),1)])),_:2},1024)])),_:2},1024))),64)),I(1),l[1])])),_:1}),g(s,{class:"advitisement"},{default:o((()=>[g(s,{class:"left"},{default:o((()=>[g(e,{class:"icon",name:"broadcast"}),g(c,{class:"alt"},{default:o((()=>[p("推广")])),_:1})])),_:1}),g(s,{class:"report marquee"},{default:o((()=>[k("span",null,"装了这个app不用再去ktv")])),_:1})])),_:1}),g(s,{class:"tabbar"},{default:o((()=>[g(s,{class:"left"},{default:o((()=>[g(s,{onClick:Z},{default:o((()=>[g(t,{class:y(["cover anplay",{anpause:E.value}]),src:W.mPictureUrl},null,8,["class","src"])])),_:1})])),_:1}),g(s,{class:"right"},{default:o((()=>[g(s,{class:"up"},{default:o((()=>[g(s,{class:"loading"},{default:o((()=>[g(s,{class:"pass",style:v({width:J.value+"%"})},null,8,["style"]),g(s,{class:"in"})])),_:1})])),_:1}),g(s,{class:"down"},{default:o((()=>[g(s,{class:"information"},{default:o((()=>[g(c,{class:"m-name"},{default:o((()=>[p(f(W.mTitle),1)])),_:1}),g(c,{class:"m-singer"},{default:o((()=>[p(f(W.mSinger),1)])),_:1})])),_:1}),g(s,{class:"operation"},{default:o((()=>[g(s,{onClick:B},{default:o((()=>[x(g(e,{class:"icon",name:"play"},null,512),[[U,E.value]]),x(g(e,{class:"icon",name:"pause"},null,512),[[U,!E.value]])])),_:1}),g(s,{onClick:G},{default:o((()=>[g(e,{class:"icon",name:"stepnext"})])),_:1}),g(s,{onClick:Y},{default:o((()=>[g(e,{class:"icon",name:T[C.value]},null,8,["name"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-f8d35d47"]]);export{z as default};
