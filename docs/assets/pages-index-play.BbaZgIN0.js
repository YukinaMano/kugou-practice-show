import{_ as e,y as a,H as l,J as t,K as s,L as o,M as n,o as c,c as i,w as u,N as r,i as d,r as p,O as g,A as f,F as m,B as y,C as h,d as A,z as S,S as _,t as b,u as k,x as v,P as w,a as L,b as T,Q as C,D as x,e as P,v as I,q as N,g as z,h as M,R}from"./index-xLs1lg9k.js";import{r as B}from"./uni-app.es.BX3S99Jr.js";const Z=e({name:"PageMeta",setup(e,{emit:t}){a((()=>{l((e=>{t("resize",e)}))}))},props:{backgroundTextStyle:{type:String,default:"dark",validator:e=>-1!==["dark","light"].indexOf(e)},backgroundColor:{type:String,default:"#ffffff"},backgroundColorTop:{type:String,default:"#ffffff"},backgroundColorBottom:{type:String,default:"#ffffff"},scrollTop:{type:String,default:""},scrollDuration:{type:Number,default:300},pageStyle:{type:String,default:""},enablePullDownRefresh:{type:[Boolean,String],default:!1},rootFontSize:{type:String,default:""}},created(){const e=t()[0];this.$pageVm=e.$vm||e,this.$watch("backgroundTextStyle",(()=>{this.setBackgroundTextStyle()})),this.$watch((()=>[this.rootFontSize,this.pageStyle]),(()=>{this.setPageMeta()})),this.$watch((()=>[this.backgroundColor,this.backgroundColorTop,this.backgroundColorBottom]),(()=>{this.setBackgroundColor()})),this.$watch((()=>[this.scrollTop,this.scrollDuration]),(()=>{this.pageScrollTo()}))},beforeMount(){this.setBackgroundColor(),(this.rootFontSize||this.pageStyle)&&this.setPageMeta(),this.backgroundTextStyle&&this.setBackgroundTextStyle()},mounted(){this.scrollTop&&this.pageScrollTo()},methods:{setPullDownRefresh(e,a){e.setStyle({pullToRefresh:{support:a,style:"Android"===plus.os.name?"circle":"default"}})},setPageMeta(){s({pageStyle:this.pageStyle,rootFontSize:this.rootFontSize})},setBackgroundTextStyle(){},setBackgroundColor(){},pageScrollTo(){let e=String(this.scrollTop);-1!==e.indexOf("rpx")&&(e=o(e.replace("rpx",""))),e=parseFloat(e),isNaN(e)||n({scrollTop:e,duration:this.scrollDuration,success:()=>{}})}}},[["render",function(e,a,l,t,s,o){const n=d;return c(),i(n,{style:{display:"none"}},{default:u((()=>[r(e.$slots,"default")])),_:3})}]]),D="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAGCAYAAADgzO9IAAABS2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDIgNzkuMTYwOTI0LCAyMDE3LzA3LzEzLTAxOjA2OjM5ICAgICAgICAiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIi8+CiA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgo8P3hwYWNrZXQgZW5kPSJyIj8+nhxg7wAAADpJREFUCJl1zTEKhEAAwMCIYG1171QbwTf4ZZlrtt1ASJmagQM7Gu64woYbv+GDbUHVWp2jb/VNF1P+MRYrBvZZBXEAAAAASUVORK5CYII=",Y=e({__name:"LyricView",props:{lyricLines:{type:Array,default:()=>[]},lyricNowLines:{type:Number,default:0},lineHeight:{type:Number,default:36}},setup(e){const l=e,t=p(0),s=p(300),o=()=>{t.value=l.lineHeight*(l.lyricNowLines-1),t.value<0&&(t.value=0)};g((()=>l.lyricNowLines),o);const n=e=>{s.value=e.detail.height,o()};return a((()=>{o()})),(a,l)=>{const s=d,o=_;return c(),i(o,{class:"lyric-scroll","scroll-y":"","scroll-top":t.value,onResize:n},{default:u((()=>[(c(!0),f(m,null,y(e.lyricLines,((a,l)=>(c(),i(s,{key:l,class:h(["lyric-line",{active:l===e.lyricNowLines}])},{default:u((()=>[A(S(a.text),1)])),_:2},1032,["class"])))),128))])),_:1},8,["scroll-top"])}}},[["__scopeId","data-v-3a1729fc"]]),j=e({__name:"play",setup(e){const l=b("audio"),t=k(l.nowMusicInfo),s=v(l,"isPause"),o=v(l,"duration"),n=p(0),r=p(0),g=v(l,"lyricLines"),f=p(0),m=["switch_allloop","switch_random","switch_oneloop"],y=v(l,"skipMode"),_=()=>{console.debug("[page back] 首页"),N({url:"/pages/index/index"})},j=()=>{l.toLastMusic()},J=()=>{l.toNextMusic()},F=()=>{l.doToggle()},O=()=>{l.doSwitchSkipMode()};return a((()=>{l.onPlaying((()=>{r.value=l.getLoading(),n.value=l.getCurrentTime(),((e=0,a=100)=>{for(let l=0;l<g.value.length&&1e3*e+a>=g.value[l].time;l++)f.value=l})(n.value,200)})),l.onMusicEnded((()=>{J()})),l._initDefaultMusic(),console.debug("组件挂载完成")})),(e,a)=>{const l=B(w("page-meta"),Z),p=z,b=d,k=L("SvgIcon"),v=M;return c(),i(b,{class:"main"},{default:u((()=>[T(l),T(p,{class:"bg1",src:t.mPictureUrl,mode:"aspectFill"},null,8,["src"]),T(b,{class:"bg2"}),T(b,{class:"status-bar"},{default:u((()=>[T(b,{class:"navigatebar",onClick:_},{default:u((()=>[T(k,{name:"back",class:"icon-back"}),T(v,{class:"m-name"},{default:u((()=>[A(S(t.mTitle),1)])),_:1})])),_:1})])),_:1}),T(b,{class:"content"},{default:u((()=>[T(b,{class:"content-top"},{default:u((()=>[T(b,{class:"m-singer"},{default:u((()=>[T(v,null,{default:u((()=>[A(S(t.mSinger),1)])),_:1})])),_:1}),T(b,{class:"m-effect"},{default:u((()=>[T(b,{class:"round-text"},{default:u((()=>[T(v,null,{default:u((()=>[A("标准")])),_:1}),T(p,{src:D})])),_:1}),T(b,{class:"round-text"},{default:u((()=>[T(v,null,{default:u((()=>[A("音效")])),_:1})])),_:1}),T(b,{class:"round-text"},{default:u((()=>[T(v,null,{default:u((()=>[A("封面")])),_:1}),T(p,{src:D})])),_:1})])),_:1})])),_:1}),T(b,{class:"content-body"},{default:u((()=>[T(b,{class:"m-cover"},{default:u((()=>[T(p,{class:h(["anplay",{anpause:s.value}]),src:t.mPictureUrl,mode:"aspectFill"},null,8,["src","class"])])),_:1}),T(b,{class:"m-lyric"},{default:u((()=>[T(Y,{lyricLines:g.value,lyricNowLines:f.value},null,8,["lyricLines","lyricNowLines"])])),_:1})])),_:1}),T(b,{class:"content-bottom"},{default:u((()=>[T(b,{class:"interactive"},{default:u((()=>[T(k,{name:"like"}),T(k,{name:"toload"}),T(k,{name:"comment"}),T(k,{name:"share"}),T(k,{name:"more"})])),_:1}),T(b,{class:"loading"},{default:u((()=>[T(v,{class:"now"},{default:u((()=>[A(S(C(R)(n.value)),1)])),_:1}),T(b,{class:"loading-bar"},{default:u((()=>[T(b,{class:"pass",style:x({width:r.value+"%"})},null,8,["style"]),T(b,{class:"in"})])),_:1}),T(v,{class:"all"},{default:u((()=>[A(S(C(R)(o.value)),1)])),_:1})])),_:1}),T(b,{class:"operation"},{default:u((()=>[T(k,{class:"a",name:m[y.value],onClick:O},null,8,["name"]),T(b,null,{default:u((()=>[T(b,{class:"b",onClick:j},{default:u((()=>[T(k,{name:"stepback"})])),_:1}),T(b,{class:"c",onClick:F},{default:u((()=>[P(T(k,{name:"play"},null,512),[[I,s.value]]),P(T(k,{name:"pause"},null,512),[[I,!s.value]])])),_:1}),T(b,{class:"b",onClick:J},{default:u((()=>[T(k,{name:"stepnext"})])),_:1})])),_:1}),T(k,{class:"a",name:"list"})])),_:1})])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-2682d5c2"]]);export{j as default};
