import{x as e,D as l,E as a,G as t,H as s,J as o,o as n,c as i,w as c,K as r,b as u,r as d,L as f,z as p,F as g,A as y,n as h,e as _,y as m,S,i as v,t as b,u as k,M as w,d as x,N as T,B as C,f as L,v as M,q as N,h as B,j as P,O as z}from"./index-CtsVY5h4.js";import{_ as F,r as D}from"./_plugin-vue_export-helper.ClwrSlG2.js";const $=F({name:"PageMeta",setup(a,{emit:t}){e((()=>{l((e=>{t("resize",e)}))}))},props:{backgroundTextStyle:{type:String,default:"dark",validator:e=>-1!==["dark","light"].indexOf(e)},backgroundColor:{type:String,default:"#ffffff"},backgroundColorTop:{type:String,default:"#ffffff"},backgroundColorBottom:{type:String,default:"#ffffff"},scrollTop:{type:String,default:""},scrollDuration:{type:Number,default:300},pageStyle:{type:String,default:""},enablePullDownRefresh:{type:[Boolean,String],default:!1},rootFontSize:{type:String,default:""}},created(){const e=a()[0];this.$pageVm=e.$vm||e,this.$watch("backgroundTextStyle",(()=>{this.setBackgroundTextStyle()})),this.$watch((()=>[this.rootFontSize,this.pageStyle]),(()=>{this.setPageMeta()})),this.$watch((()=>[this.backgroundColor,this.backgroundColorTop,this.backgroundColorBottom]),(()=>{this.setBackgroundColor()})),this.$watch((()=>[this.scrollTop,this.scrollDuration]),(()=>{this.pageScrollTo()}))},beforeMount(){this.setBackgroundColor(),(this.rootFontSize||this.pageStyle)&&this.setPageMeta(),this.backgroundTextStyle&&this.setBackgroundTextStyle()},mounted(){this.scrollTop&&this.pageScrollTo()},methods:{setPullDownRefresh(e,l){e.setStyle({pullToRefresh:{support:l,style:"Android"===plus.os.name?"circle":"default"}})},setPageMeta(){t({pageStyle:this.pageStyle,rootFontSize:this.rootFontSize})},setBackgroundTextStyle(){},setBackgroundColor(){},pageScrollTo(){let e=String(this.scrollTop);-1!==e.indexOf("rpx")&&(e=s(e.replace("rpx",""))),e=parseFloat(e),isNaN(e)||o({scrollTop:e,duration:this.scrollDuration,success:()=>{}})}}},[["render",function(e,l,a,t,s,o){const d=u;return n(),i(d,{style:{display:"none"}},{default:c((()=>[r(e.$slots,"default")])),_:3})}]]),R=F({__name:"LyricView",props:{lyricLines:{type:Array,default:()=>[]},lyricNowLines:{type:Number,default:0},lineHeight:{type:Number,default:36}},setup(l){const a=l,t=d(0),s=d(300),o=()=>{t.value=a.lineHeight*(a.lyricNowLines-1),t.value<0&&(t.value=0)};f((()=>a.lyricNowLines),o);const r=e=>{s.value=e.detail.height,o()};return e((()=>{o()})),(e,a)=>{const s=u,o=S;return n(),i(o,{class:"lyric-scroll","scroll-y":"","scroll-top":t.value,onResize:r},{default:c((()=>[(n(!0),p(g,null,y(l.lyricLines,((e,a)=>(n(),i(s,{key:a,class:h(["lyric-line",{active:a===l.lyricNowLines}])},{default:c((()=>[_(m(e.text),1)])),_:2},1032,["class"])))),128))])),_:1},8,["scroll-top"])}}},[["__scopeId","data-v-3a1729fc"]]),j=F({__name:"play",setup(l){const a=v("audio"),t=b(a.nowMusicInfo),s=k(a,"isPause"),o=k(a,"duration"),r=d(0),f=d(0),S=k(a,"lyricLines"),F=d(0),j=["icon-arrow_up_down","icon-shuffle","icon-reload"],A=k(a,"skipMode"),H=[{name:"icon-heart-outline"},{name:"icon-cloud-download-outline"},{name:"icon-message-circle-outline"},{name:"icon-share"},{name:"icon-more-horizontal"}],I=()=>{console.debug("[page back] 首页"),N({url:"/pages/index/index"})},O=()=>{a.toLastMusic()},E=()=>{a.toNextMusic()},U=()=>{a.doToggle()},V=()=>{a.doSwitchSkipMode()};return e((()=>{a.onPlaying((()=>{f.value=a.getLoading(),r.value=a.getCurrentTime(),((e=0,l=100)=>{for(let a=0;a<S.value.length&&1e3*e+l>=S.value[a].time;a++)F.value=a})(r.value,200)})),a.onMusicEnded((()=>{E()})),a._initDefaultMusic(),console.debug("组件挂载完成")})),(e,l)=>{const a=D(w("page-meta"),$),d=B,v=u,b=P;return n(),i(v,{class:"main"},{default:c((()=>[x(a),x(d,{class:"bg1",src:t.mPictureUrl,mode:"aspectFill"},null,8,["src"]),x(v,{class:"bg2"}),x(v,{class:"status-bar"},{default:c((()=>[x(v,{class:"navigatebar",onClick:I},{default:c((()=>[x(b,{class:"iconfont icon-arrow-ios-back-outline icon"}),x(b,{class:"m-name"},{default:c((()=>[_(m(t.mTitle),1)])),_:1})])),_:1})])),_:1}),x(v,{class:"content"},{default:c((()=>[x(v,{class:"content-top"},{default:c((()=>[x(v,{class:"m-singer"},{default:c((()=>[x(b,null,{default:c((()=>[_(m(t.mSinger),1)])),_:1})])),_:1}),x(v,{class:"m-effect"},{default:c((()=>[x(v,{class:"round-text"},{default:c((()=>[x(b,null,{default:c((()=>[_("标准")])),_:1}),x(b,{class:"iconfont icon-arrow-ios-downward-outline"})])),_:1}),x(v,{class:"round-text"},{default:c((()=>[x(b,null,{default:c((()=>[_("音效")])),_:1})])),_:1}),x(v,{class:"round-text"},{default:c((()=>[x(b,null,{default:c((()=>[_("封面")])),_:1}),x(b,{class:"iconfont icon-arrow-ios-downward-outline"})])),_:1})])),_:1})])),_:1}),x(v,{class:"content-body"},{default:c((()=>[x(v,{class:"m-cover"},{default:c((()=>[x(d,{class:h(["anplay",{anpause:s.value}]),src:t.mPictureUrl,mode:"aspectFill"},null,8,["src","class"])])),_:1}),x(v,{class:"m-lyric"},{default:c((()=>[x(R,{lyricLines:S.value,lyricNowLines:F.value},null,8,["lyricLines","lyricNowLines"])])),_:1})])),_:1}),x(v,{class:"content-bottom"},{default:c((()=>[x(v,{class:"interactive"},{default:c((()=>[(n(),p(g,null,y(H,((e,l)=>x(b,{key:l,class:h(["iconfont",e.name,"icon"])},null,8,["class"]))),64))])),_:1}),x(v,{class:"loading"},{default:c((()=>[x(b,{class:"now"},{default:c((()=>[_(m(T(z)(r.value)),1)])),_:1}),x(v,{class:"loading-bar"},{default:c((()=>[x(v,{class:"pass",style:C({width:f.value+"%"})},null,8,["style"]),x(v,{class:"in"})])),_:1}),x(b,{class:"all"},{default:c((()=>[_(m(T(z)(o.value)),1)])),_:1})])),_:1}),x(v,{class:"operation"},{default:c((()=>[x(v,{class:"a",onClick:V},{default:c((()=>[x(b,{class:h(["iconfont",j[A.value]])},null,8,["class"])])),_:1}),x(v,{class:"b",onClick:O},{default:c((()=>[x(b,{class:"iconfont icon-previous"})])),_:1}),x(v,{class:"c",onClick:U},{default:c((()=>[L(x(b,{class:"iconfont icon-play1"},null,512),[[M,s.value]]),L(x(b,{class:"iconfont icon-pause"},null,512),[[M,!s.value]])])),_:1}),x(v,{class:"b",onClick:E},{default:c((()=>[x(b,{class:"iconfont icon-next"})])),_:1}),x(v,{class:"a",onClick:e.btnToMusicLibrary},{default:c((()=>[x(b,{class:"iconfont icon-list1"})])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-d4674221"]]);export{j as default};
