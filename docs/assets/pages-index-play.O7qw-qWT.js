import{_ as e,q as a,D as t,E as l,G as s,H as o,J as n,o as c,c as i,w as r,K as u,i as d,r as p,L as f,u as g,F as m,x as y,y as h,d as A,s as S,S as _,m as b,n as k,t as v,M as w,a as L,b as T,N as C,z as x,e as P,v as I,O as N,g as z,h as M,P as R}from"./index-DgNV8-iG.js";import{r as B}from"./uni-app.es.m2UvHxeL.js";const Z=e({name:"PageMeta",setup(e,{emit:l}){a((()=>{t((e=>{l("resize",e)}))}))},props:{backgroundTextStyle:{type:String,default:"dark",validator:e=>-1!==["dark","light"].indexOf(e)},backgroundColor:{type:String,default:"#ffffff"},backgroundColorTop:{type:String,default:"#ffffff"},backgroundColorBottom:{type:String,default:"#ffffff"},scrollTop:{type:String,default:""},scrollDuration:{type:Number,default:300},pageStyle:{type:String,default:""},enablePullDownRefresh:{type:[Boolean,String],default:!1},rootFontSize:{type:String,default:""}},created(){const e=l()[0];this.$pageVm=e.$vm||e,this.$watch("backgroundTextStyle",(()=>{this.setBackgroundTextStyle()})),this.$watch((()=>[this.rootFontSize,this.pageStyle]),(()=>{this.setPageMeta()})),this.$watch((()=>[this.backgroundColor,this.backgroundColorTop,this.backgroundColorBottom]),(()=>{this.setBackgroundColor()})),this.$watch((()=>[this.scrollTop,this.scrollDuration]),(()=>{this.pageScrollTo()}))},beforeMount(){this.setBackgroundColor(),(this.rootFontSize||this.pageStyle)&&this.setPageMeta(),this.backgroundTextStyle&&this.setBackgroundTextStyle()},mounted(){this.scrollTop&&this.pageScrollTo()},methods:{setPullDownRefresh(e,a){e.setStyle({pullToRefresh:{support:a,style:"Android"===plus.os.name?"circle":"default"}})},setPageMeta(){s({pageStyle:this.pageStyle,rootFontSize:this.rootFontSize})},setBackgroundTextStyle(){},setBackgroundColor(){},pageScrollTo(){let e=String(this.scrollTop);-1!==e.indexOf("rpx")&&(e=o(e.replace("rpx",""))),e=parseFloat(e),isNaN(e)||n({scrollTop:e,duration:this.scrollDuration,success:()=>{}})}}},[["render",function(e,a,t,l,s,o){const n=d;return c(),i(n,{style:{display:"none"}},{default:r((()=>[u(e.$slots,"default")])),_:3})}]]),D="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAGCAYAAADgzO9IAAABS2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDIgNzkuMTYwOTI0LCAyMDE3LzA3LzEzLTAxOjA2OjM5ICAgICAgICAiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIi8+CiA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgo8P3hwYWNrZXQgZW5kPSJyIj8+nhxg7wAAADpJREFUCJl1zTEKhEAAwMCIYG1171QbwTf4ZZlrtt1ASJmagQM7Gu64woYbv+GDbUHVWp2jb/VNF1P+MRYrBvZZBXEAAAAASUVORK5CYII=",Y=e({__name:"LyricView",props:{lyricLines:{type:Array,default:()=>[]},lyricNowLines:{type:Number,default:0},lineHeight:{type:Number,default:36}},setup(e){const t=e,l=p(0),s=p(300),o=()=>{l.value=t.lineHeight*(t.lyricNowLines-1),l.value<0&&(l.value=0)};f((()=>t.lyricNowLines),o);const n=e=>{s.value=e.detail.height,o()};return a((()=>{o()})),(a,t)=>{const s=d,o=_;return c(),i(o,{class:"lyric-scroll","scroll-y":"","scroll-top":l.value,onResize:n},{default:r((()=>[(c(!0),g(m,null,y(e.lyricLines,((a,t)=>(c(),i(s,{key:t,class:h(["lyric-line",{active:t===e.lyricNowLines}])},{default:r((()=>[A(S(a.text),1)])),_:2},1032,["class"])))),128))])),_:1},8,["scroll-top"])}}},[["__scopeId","data-v-3a1729fc"]]),j=e({__name:"play",setup(e){const t=b("audio"),l=k(t.nowMusicInfo),s=v(t,"isPause"),o=v(t,"duration"),n=p(0),u=p(0),f=v(t,"lyricLines"),g=p(0),m=["switch_allloop","switch_random","switch_oneloop"],y=v(t,"skipMode"),_=()=>{N()},j=()=>{t.toLastMusic()},J=()=>{t.toNextMusic()},E=()=>{t.doToggle()},O=()=>{t.doSwitchSkipMode()};return a((()=>{t.onPlaying((()=>{u.value=t.getLoading(),n.value=t.getCurrentTime(),((e=0,a=100)=>{for(let t=0;t<f.value.length&&1e3*e+a>=f.value[t].time;t++)g.value=t})(n.value,200)})),t.onMusicEnded((()=>{J()})),console.debug("组件挂载完成")})),(e,a)=>{const t=B(w("page-meta"),Z),p=z,b=d,k=L("SvgIcon"),v=M;return c(),i(b,{class:"main"},{default:r((()=>[T(t),T(p,{class:"bg1",src:l.mPictureUrl},null,8,["src"]),T(b,{class:"bg2"}),T(b,{class:"status-bar"},{default:r((()=>[T(b,{class:"navigatebar",onClick:_},{default:r((()=>[T(k,{name:"back",class:"icon-back"}),T(v,{class:"m-name"},{default:r((()=>[A(S(l.mTitle),1)])),_:1})])),_:1})])),_:1}),T(b,{class:"content"},{default:r((()=>[T(b,{class:"content-top"},{default:r((()=>[T(b,{class:"m-singer"},{default:r((()=>[T(v,null,{default:r((()=>[A(S(l.mSinger),1)])),_:1})])),_:1}),T(b,{class:"m-effect"},{default:r((()=>[T(b,{class:"round-text"},{default:r((()=>[T(v,null,{default:r((()=>[A("标准")])),_:1}),T(p,{src:D})])),_:1}),T(b,{class:"round-text"},{default:r((()=>[T(v,null,{default:r((()=>[A("音效")])),_:1})])),_:1}),T(b,{class:"round-text"},{default:r((()=>[T(v,null,{default:r((()=>[A("封面")])),_:1}),T(p,{src:D})])),_:1})])),_:1})])),_:1}),T(b,{class:"content-body"},{default:r((()=>[T(b,{class:"m-cover"},{default:r((()=>[T(p,{class:h(["anplay",{anpause:s.value}]),src:l.mPictureUrl},null,8,["src","class"])])),_:1}),T(b,{class:"m-lyric"},{default:r((()=>[T(Y,{lyricLines:f.value,lyricNowLines:g.value},null,8,["lyricLines","lyricNowLines"])])),_:1})])),_:1}),T(b,{class:"content-bottom"},{default:r((()=>[T(b,{class:"interactive"},{default:r((()=>[T(k,{name:"like"}),T(k,{name:"toload"}),T(k,{name:"comment"}),T(k,{name:"share"}),T(k,{name:"more"})])),_:1}),T(b,{class:"loading"},{default:r((()=>[T(v,{class:"now"},{default:r((()=>[A(S(C(R)(n.value)),1)])),_:1}),T(b,{class:"loading-bar"},{default:r((()=>[T(b,{class:"pass",style:x({width:u.value+"%"})},null,8,["style"]),T(b,{class:"in"})])),_:1}),T(v,{class:"all"},{default:r((()=>[A(S(C(R)(o.value)),1)])),_:1})])),_:1}),T(b,{class:"operation"},{default:r((()=>[T(k,{class:"a",name:m[y.value],onClick:O},null,8,["name"]),T(b,null,{default:r((()=>[T(b,{class:"b",onClick:j},{default:r((()=>[T(k,{name:"stepback"})])),_:1}),T(b,{class:"c",onClick:E},{default:r((()=>[P(T(k,{name:"play"},null,512),[[I,s.value]]),P(T(k,{name:"pause"},null,512),[[I,!s.value]])])),_:1}),T(b,{class:"b",onClick:J},{default:r((()=>[T(k,{name:"stepnext"})])),_:1})])),_:1}),T(k,{class:"a",name:"list"})])),_:1})])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-b9c5167d"]]);export{j as default};
